---
title:  "백준 1699번: 제곱수의 합 - javascript"
categories: 
  - boj
tags:
  - javascript
  - dp
  - algorithm
date: 2021-04-23
---
### 백준 1699번: 제곱수의 합

### 문제 설명   
어떤 자연수 N은 그보다 작거나 같은 제곱수들의 합으로 나타낼 수 있다.   
예를 들어 11=32+12+12(3개 항)이다.   
이런 표현방법은 여러 가지가 될 수 있는데, 11의 경우 11=22+22+12+12+12(5개 항)도 가능하다.   
이 경우, 수학자 숌크라테스는 “11은 3개 항의 제곱수 합으로 표현할 수 있다.”라고 말한다.   
또한 11은 그보다 적은 항의 제곱수 합으로 표현할 수 없으므로, 11을 그 합으로써 표현할 수 있는 제곱수 항의 최소 개수는 3이다.

주어진 자연수 N을 이렇게 제곱수들의 합으로 표현할 때에 그 항의 최소개수를 구하는 프로그램을 작성하시오.

#### 입력
첫째 줄에 자연수 N이 주어진다. (1 ≤ N ≤ 100,000)

#### 출력
주어진 자연수를 제곱수의 합으로 나타낼 때에 그 제곱수 항의 최소 개수를 출력한다.
### 접근   
처음에는 N값보다 작은 최대 제곱수부터 빼가면서 dp식을 완성하면 된다고 생각했다.   
예를 들어 10 = 3^2 + 1^2 이런식으로 10보다 작은 최대 제곱수는 3^2이니 3^2를 빼주고 남은 값들에서 똑같은 방법을 반복하면 dp식으로 할 수 있다고 생각했다.

|1|2|3|4|5|6|
|---|---|---|---|---|---|
|1^2|1^2 + 1^2| 1^2 + 1^2+ 1^2|2^2|2^2 + 1^2|2^2 + 1^2 + 1^2|

이런식으로 생각하고 돌렸더니 틀렸다!...

반례를 찾아보니 43을 해보라는 말이 제일 많이 보였다.
43을 내 방식대로 풀게되면..
```
43 = dp(43-6^2) + 1
   = dp(7-2^2) + 1 + 1
   = dp(3-1^2) + 1 + 1 + 1
   = dp(2-1^2) + 1 + 1 + 1 + 1
   = 1 + 1 + 1 + 1 + 1
   = 5
```
5가 나온다. 하지만 맨처음에 6의 제곱수를 더하는 대신에 5의 제곱수를 더하게 되면
43 = 5^2 + 3^2 + 3^2로 3번만에 끝낼수 있다.

처음에는 그저 N보다 작은 제곱수 중 최대값을 빼가는 dp식이였는데 틀린방법이였다.   
즉, 무조건 가능한 최대 제곱수를 빼는 것이 최소 결과값으로 이어지는 공식이 아닌것이고,
N보다 작은 제곱수 중 최대값이 아닌 N보다 작은 제곱수들을 **뺀 결과들 중 최소값**을 골라야 했던것이다. 

그렇게 바꾼 방법으로 43을 다시 풀게되면..
```
43 = min(dp(43-6^2), dp(43-5^2), dp(43-4^2), dp(43-3^2), dp(43-2^2), dp(43-1^2))
```
가 되는데, 매 dp를 구하기 위해 N에서 0까지 내려가려면 다소 복잡하다.
그래서 0부터 N까지 올라가는 bottom-up 방식을 채용했다.

먼저, n까지 올라갈 각i항에 대해 기본값이 필요한데,   
모든 숫자는1^2으로 표현하는 것이 제일 최댓값을 가지므로 i=0부터 n까지의 반복문을 통해 각 i번째 항의 값이 i인 배열을 만들어준다.

그 뒤에 i=1부터 n까지 반복문을 돌리면서 내부적으로 제곱근끼리 최소 결과값을 비교해줄 반복문 j를 한번 더 돌리게 된다. j는 1부터 j^2가 n보다 작을때 까지만 돌린다.   
그러면 각 i번째마다 i보다 작은 제곱수 j들의 최솟값을 찾아서 i항에 넣을 수 있다.



#### 정답 코드
```js
const readline = require('readline');
const rl = readline.createInterface({
  input: process.stdin,
  output: process.stdout
});
let input = [];
rl.on('line', function (line) {
  input.push(line)
})
  .on('close', async function () {
  // 답안 작성
  let n = parseInt(input[0]);
  let answer = sqt_sum(n)
  console.log(answer);
  process.exit();
});

function sqt_sum(n){
  let arr = [];
  for(let i=0;i<=n;i++){    
    arr.push(i);
  }
  for(let i = 1;i<=n;i++){
    for(let j=1;j**2<=i;j++){
      arr[i]=Math.min(arr[i],arr[i-j**2]+1);
    }
  }
  //제일마지막 n번째의 최소 제곱수의 합 반환
  return arr.pop();
}
```